sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/m/MessageToast","sap/ui/model/json/JSONModel"],function(e,t,o,i){"use strict";return e.extend("com.study.controller.BookDetail",{onInit:function(){var e=this.getOwnerComponent().getRouter();e.getRoute("bookDetail").attachPatternMatched(this._onObjectMatched,this);this.getView().setModel(new i({editMode:false}),"view")},_onObjectMatched:function(e){var t=e.getParameter("arguments").bookId;this.getView().bindElement({path:"/Books('"+t+"')",parameters:{$expand:"author"},events:{dataRequested:function(){this.getView().setBusy(true)}.bind(this),dataReceived:function(){this.getView().setBusy(false)}.bind(this)}})},onNavBack:function(){var e=this.getOwnerComponent().getRouter();e.navTo("RouteBooks",{},true)},onEdit:function(){var e=this.getView().getModel("view");e.setProperty("/editMode",true)},onSave:function(){var e=this.getView().getBindingContext();var i=this.getView().getModel();i.submitBatch("$auto").then(function(){o.show("Book updated successfully");this.getView().getModel("view").setProperty("/editMode",false)}.bind(this)).catch(function(e){t.error("Failed to update book: "+e.message)})},onCancel:function(){var e=this.getView().getModel();e.resetChanges();this.getView().getModel("view").setProperty("/editMode",false)},onDelete:function(){var e=this.getView().getBindingContext();var o=e.getObject();t.confirm("Are you sure you want to delete '"+o.title+"'?",{title:"Confirm Deletion",onClose:function(o){if(o===t.Action.OK){this._deleteBook(e)}}.bind(this)})},_deleteBook:function(e){var i=this.getView().getModel();e.delete("$auto").then(function(){o.show("Book deleted successfully");this.onNavBack()}.bind(this)).catch(function(e){t.error("Failed to delete book: "+e.message)})}})});
//# sourceMappingURL=BookDetail.controller.js.map